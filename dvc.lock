schema: '2.0'
stages:
  data_preprocessing:
    cmd:
    - python scripts/preprocess_data.py
    deps:
    - path: ./feature_handling/feature_actions_adult_income.json
      md5: 2aeeb4a8319b945fa914c400e939e197
      size: 58
    - path: ./feature_handling/feature_actions_penguins.json
      md5: 861bff553bc372dc5cc343e909f69b4f
      size: 79
    - path: scripts/preprocess_data.py
      md5: fe66b68f2dd5ad815519e6821613024f
      size: 1836
    - path: utils/feature_handler.py
      md5: c37ecc5c73593a41e10789c8846aced0
      size: 12139
    - path: utils/params.py
      md5: edbe52eb8c2150cae39bb569e5a341af
      size: 1880
    params:
      params.yaml:
        data_preprocessing:
          feature_handler_dir: ./feature_handling/
          feature_action_file: ./feature_handling/feature_actions_adult_income.json
          dataset_tag: adults
          dataset_path: ./data/adult_income_dataset/adult.data
    outs:
    - path: data/training_input/
      md5: bc39173eab8717e9546f8c4a7a804cf0.dir
      size: 2072370
      nfiles: 1
    - path: feature_handling/feature_handler.json
      md5: 5d1a75980d75e9eee4c18b42e586f13b
      size: 4273
    - path: feature_handling/feature_handler_pretty_summary.json
      md5: 333f2b13ae4dd72f5dfa18f93d35b647
      size: 922
  train_autoembedder:
    cmd:
    - python scripts/train_autoembedder.py ./data/training_input/
    deps:
    - path: ./autoembedder/
      md5: 6399baa626786a08081896a6f32e1a75.dir
      size: 45949
      nfiles: 7
    - path: ./data/training_input/
      md5: bc39173eab8717e9546f8c4a7a804cf0.dir
      size: 2072370
      nfiles: 1
    - path: ./feature_handling/feature_handler.json
      md5: 5d1a75980d75e9eee4c18b42e586f13b
      size: 4273
    - path: ./utils/feature_handler.py
      md5: c37ecc5c73593a41e10789c8846aced0
      size: 12139
    - path: scripts/train_autoembedder.py
      md5: e046c2ad9811830b01fbf546332d5246
      size: 2751
    params:
      params.yaml:
        train_autoembedder:
          output_directory: ./data/model
          feature_handler_file: ./feature_handling/feature_handler.json
          manual_encoder_architecture:
          - 108
          - 74
          - 50
          manual_decoder_architecture: []
          hidden_layer_activation_function: ReLU
          output_layer_activation_function: tanh
          test_data_fraction: 0.2
          embeddings_initializer: uniform
          normalisation_method: manual
          optimizer: adam
          loss: mse
          metrics: []
          learning_rate: 0.005
          batch_size: 1024
          n_epochs: 1
    outs:
    - path: ./data/model/
      md5: 970dd08dd78bb3520af765d94acc467f.dir
      size: 1198307
      nfiles: 4
  train_supervised_classification_embedding:
    cmd:
    - python scripts/supervised_classification_wembedding.py ./data/training_input/
    deps:
    - path: ./data/training_input/
      md5: bc39173eab8717e9546f8c4a7a804cf0.dir
      size: 2072370
      nfiles: 1
    - path: ./scripts/supervised_classification_wembedding.py
      md5: 8ba9ab725dca3bb19297dafadc94a2f0
      size: 3278
    params:
      params.yaml:
        train_classification_models:
          dataset_tag: adults
          feature_handler_file: ./feature_handling/feature_handler.json
          hidden_layer_activation_function: relu
          output_layer_activation_function: softmax
          n_nodes_per_layer:
          - 108
          - 74
          - 50
          normalisation_method: manual
          test_data_fraction: 0.2
          embeddings_initializer: uniform
          optimizer: adam
          loss: cce
          learning_rate: 0.001
          metrics:
          - accuracy
          batch_size: 2048
          n_epochs: 10
          verbosity_level: 1
  train_supervised_classification_autoembedding:
    cmd:
    - python scripts/supervised_classification_wembedding.py ./data/training_input/
      ./data/model/autoembedder
    deps:
    - path: ./data/model/
      md5: 970dd08dd78bb3520af765d94acc467f.dir
      size: 1198307
      nfiles: 4
    - path: ./data/training_input/
      md5: bc39173eab8717e9546f8c4a7a804cf0.dir
      size: 2072370
      nfiles: 1
    - path: ./scripts/supervised_classification_wembedding.py
      md5: 8ba9ab725dca3bb19297dafadc94a2f0
      size: 3278
    params:
      params.yaml:
        train_classification_models:
          dataset_tag: adults
          feature_handler_file: ./feature_handling/feature_handler.json
          hidden_layer_activation_function: relu
          output_layer_activation_function: softmax
          n_nodes_per_layer:
          - 108
          - 74
          - 50
          normalisation_method: manual
          test_data_fraction: 0.2
          embeddings_initializer: uniform
          optimizer: adam
          loss: cce
          learning_rate: 0.001
          metrics:
          - accuracy
          batch_size: 2048
          n_epochs: 10
          verbosity_level: 1
