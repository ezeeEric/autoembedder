schema: '2.0'
stages:
  data_preprocessing:
    cmd:
    - python scripts/preprocess_data.py
    deps:
    - path: ./feature_handling/feature_actions_adult_income.json
      md5: 2aeeb4a8319b945fa914c400e939e197
      size: 58
    - path: ./feature_handling/feature_actions_penguins.json
      md5: 861bff553bc372dc5cc343e909f69b4f
      size: 79
    - path: scripts/preprocess_data.py
      md5: 487e9f61044f2b4d894e6ddc0f2571fa
      size: 1803
    - path: utils/feature_handler.py
      md5: c37ecc5c73593a41e10789c8846aced0
      size: 12139
    - path: utils/params.py
      md5: edbe52eb8c2150cae39bb569e5a341af
      size: 1880
    params:
      params.yaml:
        data_preprocessing:
          feature_handler_dir: ./feature_handling/
          feature_action_file: ./feature_handling/feature_actions_adult_income.json
          dataset_tag: adults
          dataset_path: ./data/adult_income_dataset/adult.data
    outs:
    - path: data/training_input/
      md5: bc39173eab8717e9546f8c4a7a804cf0.dir
      size: 2072370
      nfiles: 1
    - path: feature_handling/feature_handler.json
      md5: 5d1a75980d75e9eee4c18b42e586f13b
      size: 4273
    - path: feature_handling/feature_handler_pretty_summary.json
      md5: 333f2b13ae4dd72f5dfa18f93d35b647
      size: 922
  train_autoembedder:
    cmd:
    - python scripts/train_autoembedder.py ./data/training_input/
    deps:
    - path: ./autoembedder/
      md5: 194401ecd5a5633b3ba2b89d31c6b952.dir
      size: 45339
      nfiles: 7
    - path: ./data/training_input/
      md5: 76518463305c60240aba1a1514d686a0.dir
      size: 12754
      nfiles: 1
    - path: ./feature_handling/feature_handler.json
      md5: dfb240b251b8a11fa558492ebc47fe47
      size: 2456
    - path: ./utils/feature_handler.py
      md5: 19b7da5e24243edeab1a54aadbb7c1eb
      size: 14152
    - path: scripts/train_autoembedder.py
      md5: 990077e5671b8a01b2458cc675840562
      size: 2763
    params:
      params.yaml:
        train_autoembedder:
          output_directory: ./data/model
          feature_handler_file: ./feature_handling/feature_handler.json
          manual_encoder_architecture:
          - 8
          - 6
          - 4
          manual_decoder_architecture: []
          hidden_layer_activation_function: ReLU
          output_layer_activation_function: tanh
          test_data_fraction: 0.2
          embeddings_initializer: uniform
          normalisation_method: manual
          optimizer: adam
          loss: mse
          metrics: []
          learning_rate: 0.005
          batch_size: 64
          n_epochs: 100
    outs:
    - path: ./data/model/
      md5: eb842542b8b7ee99f63b8393988e6dc3.dir
      size: 274305
      nfiles: 4
  train_supervised_classification_embedding:
    cmd:
    - python scripts/supervised_classification_wembedding.py ./data/training_input/
    deps:
    - path: ./data/training_input/
      md5: 76518463305c60240aba1a1514d686a0.dir
      size: 12754
      nfiles: 1
    - path: ./scripts/supervised_classification_wembedding.py
      md5: 43704ae81a052631da4ba8ef4755a98b
      size: 3082
    params:
      params.yaml:
        train_classification_models:
          feature_handler_file: ./feature_handling/feature_handler.json
          hidden_layer_activation_function: relu
          output_layer_activation_function: softmax
          n_nodes_per_layer:
          - 4
          - 4
          - 3
          normalisation_method: manual
          test_data_fraction: 0.2
          embeddings_initializer: uniform
          optimizer: adam
          loss: cce
          learning_rate: 0.005
          metrics:
          - accuracy
          batch_size: 32
          n_epochs: 100
          verbosity_level: 1
  train_supervised_classification_autoembedding:
    cmd:
    - python scripts/supervised_classification_wembedding.py ./data/training_input/
      ./data/model/autoembedder
    deps:
    - path: ./data/training_input/
      md5: 76518463305c60240aba1a1514d686a0.dir
      size: 12754
      nfiles: 1
    - path: ./scripts/supervised_classification_wembedding.py
      md5: d6dda57a200f834338326b69baa6ad23
      size: 3179
    params:
      params.yaml:
        train_classification_models:
          feature_handler_file: ./feature_handling/feature_handler.json
          hidden_layer_activation_function: relu
          output_layer_activation_function: softmax
          n_nodes_per_layer:
          - 4
          - 4
          - 3
          normalisation_method: manual
          test_data_fraction: 0.2
          embeddings_initializer: uniform
          optimizer: adam
          loss: cce
          learning_rate: 0.1
          metrics:
          - accuracy
          batch_size: 32
          n_epochs: 100
          verbosity_level: 1
