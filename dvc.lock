schema: '2.0'
stages:
  data_preprocessing:
    cmd:
    - python scripts/preprocess_data.py
    deps:
    - path: ./feature_handling/feature_actions_adult_income.json
      md5: 2aeeb4a8319b945fa914c400e939e197
      size: 58
    - path: ./feature_handling/feature_actions_penguins.json
      md5: 861bff553bc372dc5cc343e909f69b4f
      size: 79
    - path: ./scripts/preprocess_data.py
      md5: fe66b68f2dd5ad815519e6821613024f
      size: 1836
    - path: ./utils/data.py
      md5: f0e7f3b7d68ac244ddac7b452e1d5a14
      size: 5191
    - path: ./utils/feature_handler.py
      md5: c37ecc5c73593a41e10789c8846aced0
      size: 12139
    - path: ./utils/params.py
      md5: edbe52eb8c2150cae39bb569e5a341af
      size: 1880
    params:
      params.yaml:
        data_preprocessing:
          feature_handler_dir: ./feature_handling/
          feature_action_file: ./feature_handling/feature_actions_adult_income.json
          dataset_tag: adults
          dataset_path: ./data/adult_income_dataset/adult.data
    outs:
    - path: ./data/training_input/
      md5: bc39173eab8717e9546f8c4a7a804cf0.dir
      size: 2072370
      nfiles: 1
    - path: ./feature_handling/feature_handler.json
      md5: 5d1a75980d75e9eee4c18b42e586f13b
      size: 4273
    - path: feature_handling/feature_handler_pretty_summary.json
      md5: 333f2b13ae4dd72f5dfa18f93d35b647
      size: 922
  train_autoembedder:
    cmd:
    - python scripts/train_autoembedder.py ./data/training_input/
    deps:
    - path: ./autoembedder/
      md5: eebaa003850d91e9ae88fa1131366fc0.dir
      size: 47433
      nfiles: 7
    - path: ./data/training_input/
      md5: bc39173eab8717e9546f8c4a7a804cf0.dir
      size: 2072370
      nfiles: 1
    - path: ./feature_handling/feature_handler.json
      md5: 5d1a75980d75e9eee4c18b42e586f13b
      size: 4273
    - path: ./scripts/train_autoembedder.py
      md5: 310bc031b56f72f5c035609ee748a5fd
      size: 3214
    - path: ./utils/data.py
      md5: f0e7f3b7d68ac244ddac7b452e1d5a14
      size: 5191
    - path: ./utils/feature_handler.py
      md5: c37ecc5c73593a41e10789c8846aced0
      size: 12139
    params:
      params.yaml:
        train_autoembedder:
          output_directory: ./data/model
          feature_handler_file: ./feature_handling/feature_handler.json
          manual_encoder_architecture:
          - 108
          - 74
          - 50
          manual_decoder_architecture: []
          hidden_layer_activation_function: ReLU
          output_layer_activation_function: tanh
          test_data_fraction: 0.2
          embeddings_initializer: uniform
          normalisation_method: manual
          optimizer: adam
          loss: mse
          metrics: []
          learning_rate: 0.005
          batch_size: 1024
          n_epochs: 2
    outs:
    - path: ./data/model/
      md5: 5aefbe647dfc94e3fe3020b202d9f09c.dir
      size: 1199139
      nfiles: 4
  train_supervised_classification_embedding:
    cmd:
    - python scripts/supervised_classification_wembedding.py ./data/training_input/
    deps:
    - path: ./data/training_input/
      md5: bc39173eab8717e9546f8c4a7a804cf0.dir
      size: 2072370
      nfiles: 1
    - path: ./scripts/supervised_classification_wembedding.py
      md5: 8ba9ab725dca3bb19297dafadc94a2f0
      size: 3278
    - path: ./utils/data.py
      md5: f0e7f3b7d68ac244ddac7b452e1d5a14
      size: 5191
    - path: ./utils/engine.py
      md5: 947de9a00d4aec5544307aca89598d75
      size: 1604
    - path: ./utils/utils.py
      md5: 68e095e276449b7c52f4c7449e33515a
      size: 2216
    params:
      params.yaml:
        train_classification_models:
          dataset_tag: adults
          feature_handler_file: ./feature_handling/feature_handler.json
          hidden_layer_activation_function: relu
          output_layer_activation_function: softmax
          n_nodes_per_layer:
          - 108
          - 74
          - 50
          normalisation_method: manual
          test_data_fraction: 0.2
          embeddings_initializer: uniform
          optimizer: adam
          loss: cce
          learning_rate: 0.001
          metrics:
          - accuracy
          batch_size: 2048
          n_epochs: 10
          verbosity_level: 1
  train_supervised_classification_autoembedding:
    cmd:
    - python scripts/supervised_classification_wembedding.py ./data/training_input/
      ./data/model/autoembedder
    deps:
    - path: ./data/model/
      md5: 89f492072a88cb1b2e992d7524eebb29.dir
      size: 1198369
      nfiles: 4
    - path: ./data/training_input/
      md5: bc39173eab8717e9546f8c4a7a804cf0.dir
      size: 2072370
      nfiles: 1
    - path: ./scripts/supervised_classification_wembedding.py
      md5: 8ba9ab725dca3bb19297dafadc94a2f0
      size: 3278
    - path: ./utils/data.py
      md5: f0e7f3b7d68ac244ddac7b452e1d5a14
      size: 5191
    - path: ./utils/engine.py
      md5: 947de9a00d4aec5544307aca89598d75
      size: 1604
    - path: ./utils/utils.py
      md5: 68e095e276449b7c52f4c7449e33515a
      size: 2216
    params:
      params.yaml:
        train_classification_models:
          dataset_tag: adults
          feature_handler_file: ./feature_handling/feature_handler.json
          hidden_layer_activation_function: relu
          output_layer_activation_function: softmax
          n_nodes_per_layer:
          - 108
          - 74
          - 50
          normalisation_method: manual
          test_data_fraction: 0.2
          embeddings_initializer: uniform
          optimizer: adam
          loss: cce
          learning_rate: 0.001
          metrics:
          - accuracy
          batch_size: 2048
          n_epochs: 10
          verbosity_level: 1
